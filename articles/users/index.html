
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://vulcainjs.github.io/articles/users/">
      
      
        <meta name="author" content="Alain Metge">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.1, mkdocs-material-1.2.0">
    
    
      
        <title>Users service - Vulcain</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-e17eeafcbc.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-892b79c5c5.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="Vulcain" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Articles
                </span>
              
            
            Users service
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/vulcainjs/vulcainjs.github.io" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Vulcain
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/vulcainjs/vulcainjs.github.io" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../gettingStarted/" title="My first microservices" class="md-nav__link">
      My first microservices
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/actions/" title="Actions" class="md-nav__link">
      Actions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/query/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/event/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/domain/" title="Domain models" class="md-nav__link">
      Domain models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/injection/" title="Dependencies injection" class="md-nav__link">
      Dependencies injection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/configurations/" title="Configurations" class="md-nav__link">
      Configurations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/metrics/" title="Monitoring" class="md-nav__link">
      Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Articles
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Articles
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="How to index" class="md-nav__link">
      How to index
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Users service
      </label>
    
    <a href="./" title="Users service" class="md-nav__link md-nav__link--active">
      Users service
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialize-the-project" title="Initialize the project" class="md-nav__link">
    Initialize the project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-users-management-feature" title="Add users management feature" class="md-nav__link">
    Add users management feature
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-new-user" title="Create a new user" class="md-nav__link">
    Create a new user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-bearer-token" title="Create a bearer token" class="md-nav__link">
    Create a bearer token
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#renew-a-token" title="Renew a token" class="md-nav__link">
    Renew a token
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-specify-a-custom-secret-key-for-production" title="How to specify a custom secret key for production" class="md-nav__link">
    How to specify a custom secret key for production
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-apikey" title="Create apikey" class="md-nav__link">
    Create apikey
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extend-default-user-model" title="Extend default user model" class="md-nav__link">
    Extend default user model
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/license/" title="license" class="md-nav__link">
      license
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialize-the-project" title="Initialize the project" class="md-nav__link">
    Initialize the project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-users-management-feature" title="Add users management feature" class="md-nav__link">
    Add users management feature
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-new-user" title="Create a new user" class="md-nav__link">
    Create a new user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-bearer-token" title="Create a bearer token" class="md-nav__link">
    Create a bearer token
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#renew-a-token" title="Renew a token" class="md-nav__link">
    Renew a token
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-specify-a-custom-secret-key-for-production" title="How to specify a custom secret key for production" class="md-nav__link">
    How to specify a custom secret key for production
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-apikey" title="Create apikey" class="md-nav__link">
    Create apikey
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extend-default-user-model" title="Extend default user model" class="md-nav__link">
    Extend default user model
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
                 <a href="https://github.com/vulcainjs/vulcainjs.github.io/edit/mkdocs/docs/articles/users.md" title="Edit this page" class="md-icon md-content__edit">edit</a>
               
              
                
                <h1 id="create-a-user-service">Create a user service<a class="headerlink" href="#create-a-user-service" title="Permanent link">&para;</a></h1>
<p><strong>Vulcain</strong> uses <a href="../../reference/security">scopes</a> to manage authorizations but this is only valid if your users are authentified.</p>
<p>In this article, we will create a service for managing users. It will provide the following features:</p>
<ul>
<li>Manage users defined in a basic extensible user model</li>
<li>Generate bearer token to use with vulcain service.</li>
<li>Optionaly manage api key.</li>
</ul>
<h2 id="initialize-the-project">Initialize the project<a class="headerlink" href="#initialize-the-project" title="Permanent link">&para;</a></h2>
<p>Let's start from an empty vulcain project.</p>
<div class="codehilite"><pre><span></span>vulcain new --template NodeMicroService users-service
</pre></div>


<p>Then open the project and remove the src/sample folder.</p>
<h2 id="add-users-management-feature">Add users management feature<a class="headerlink" href="#add-users-management-feature" title="Permanent link">&para;</a></h2>
<p>To do this, we will just add an npm package with the following command:</p>
<div class="codehilite"><pre><span></span>npm i vulcain-users --save
</pre></div>


<p>This package contains all the required features.
We need then to declare it as services. Go to startup.ts and :</p>
<ul>
<li>Add import statement</li>
</ul>
<div class="codehilite"><pre><span></span><span class="n">import</span> <span class="p">*</span> <span class="k">as</span> <span class="n">users</span> <span class="k">from</span> <span class="s">&quot;vulcain-users&quot;</span><span class="p">;</span>
</pre></div>


<ul>
<li>Declare services by adding the following line in <code>initializeDefaultServices</code></li>
</ul>
<div class="codehilite"><pre><span></span><span class="n">users</span><span class="p">.</span><span class="n">useUserManagement</span><span class="p">(</span><span class="n">container</span><span class="p">);</span>
</pre></div>


<p>That's it. You have a user and apikey service management ready to use. You can see all the handlers exposed from http://localhost:8080/api/_servicedescription.</p>
<h2 id="create-a-new-user">Create a new user<a class="headerlink" href="#create-a-new-user" title="Permanent link">&para;</a></h2>
<p>First we need to create a new admin user with all authorizations by settings its scope to '*'.</p>
<div class="codehilite"><pre><span></span>curl -XPOST http://localhost:8080/api/user.create -u admin:admin -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
-d <span class="s1">&#39;{&quot;name&quot;:&quot;admin&quot;, &quot;password&quot;:&quot;password&quot;, &quot;scopes&quot;:[&quot;*&quot;]}&#39;</span>
</pre></div>


<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For this first request, we have used admin/admin as the authentified user. This is the default user with all admin rights if <strong>ANY</strong> user exists in the database.</p>
<p>As soon as you create an user, this admin/admin authentication is no longer valid (but you can create a new one with the same name).</p>
</div>
<p>We can now test authentication and authorization with the following requests:</p>
<div class="codehilite"><pre><span></span>curl http://localhost:8080/api/user.all -I
curl http://localhost:8080/api/user.all -I -u admin:admin
curl http://localhost:8080/api/user.all -I -u admin:password
curl http://localhost:8080/api/user.all -u admin:password
</pre></div>


<blockquote>
<p>Note how admin:admin is no longer valid.</p>
</blockquote>
<h2 id="create-a-bearer-token">Create a bearer token<a class="headerlink" href="#create-a-bearer-token" title="Permanent link">&para;</a></h2>
<p>A bearer token is used to authentify user. It is generaly created when a user logs into a web site.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Security context propagation</p>
<p>Bearer token will be valid and propagated along all vulcain service requests propagating the security context. Each bearer token encapsulates user properties (name, displayName, scopes and tenant) available from the <code>requestContext.user</code> property.</p>
<p>You can override a security context when you call another service by using <strong>impersonation</strong>. Impersonation can only be done using api key by calling the <code>AbstractServiceCommand.setRequestContext</code> method.</p>
</div>
<div class="codehilite"><pre><span></span>curl http://localhost:8080/api/createToken -XPOST -u admin:password
</pre></div>


<p>The response must be like this:</p>
<div class="codehilite"><pre><span></span><span class="o">{</span><span class="s2">&quot;tenant&quot;</span>:<span class="s2">&quot;vulcain&quot;</span>,<span class="s2">&quot;action&quot;</span>:<span class="s2">&quot;createToken&quot;</span>,<span class="s2">&quot;domain&quot;</span>:<span class="s2">&quot;identities&quot;</span>,<span class="s2">&quot;status&quot;</span>:<span class="s2">&quot;Success&quot;</span>,<span class="s2">&quot;correlationId&quot;</span>:<span class="s2">&quot;fd3a945dcb9146538713f9a351ec9378&quot;</span>,<span class="s2">&quot;value&quot;</span>:<span class="o">{</span><span class="s2">&quot;expiresIn&quot;</span>:1200,<span class="s2">&quot;token&quot;</span>:<span class="s2">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXV9.eyJ2YWx1ZSI6eyJ1c2VyIjp7ImRpc3BsYXlOYW1lIjoiYWRtaW4iLCJuYW1lIjoiRtaW4iLCJ0ZW5hbnQiOiJ2dWxjYWluIn0sInNjb3BlcyI6WyIqIl19LCJpYXQiOjE0ODk2NjQxNzEsImV4cCI6MTQ4OTYTM3MX0.J8kVMGqFyQr_j0M2J4dSB0fxfyFLJgcQCuD2by1Bk&quot;</span>,<span class="s2">&quot;renewToken&quot;</span>:<span class="s2">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXJ9.eyJpYXQiOjE0ODk2NjQxNsImV4cCI6MTQ4OTY2NTM3MX0.A4tuPF1En_eD53TcMApbweEYtKC-lqq2Zc0lOkavKzI&quot;</span><span class="o">}}</span>
</pre></div>


<p>You can now use this token directly</p>
<div class="codehilite"><pre><span></span>curl http://localhost:8080/api/user.all -H <span class="s1">&#39;Authorization: Bearer &lt;your token&gt;&#39;</span>
</pre></div>


<h2 id="renew-a-token">Renew a token<a class="headerlink" href="#renew-a-token" title="Permanent link">&para;</a></h2>
<p>You can renew a bearer token to extend its expiration time. For this you must use the renewToken provided when your first requested the token.</p>
<blockquote>
<p>Obviously you need to renew a token before its expiration.</p>
</blockquote>
<div class="codehilite"><pre><span></span>curl http://localhost:8080/api/renewToken -H <span class="s1">&#39;Authorization: Bearer &lt;your bearer token&gt;&#39;</span> -XPOST -d <span class="s1">&#39;{&quot;renewToken&quot;: &quot;&lt;your renew token&gt;&quot;}&#39;</span> -H <span class="s1">&#39;Content-Type: application/json&#39;</span>
</pre></div>


<p>For more information about using token read <a href="https://auth0.com/blog/refresh-tokens-what-are-they-and-when-to-use-them">this</a></p>
<h3 id="how-to-specify-a-custom-secret-key-for-production">How to specify a custom secret key for production<a class="headerlink" href="#how-to-specify-a-custom-secret-key-for-production" title="Permanent link">&para;</a></h3>
<p><strong>Vulcain</strong> uses a default secret key to create token. If you want to deploy <strong>vulcain</strong> service in production you <strong>MUST</strong> provide a new secret key.</p>
<p>This secret key must be shared by all services using bearer token. The best way to share a property is to use a <a href="../../reference/configurations">dynamic property</a>. But like all dynamic properties you can simply use an environment variable.</p>
<p>Three properties can be defined:</p>
<table>
<thead>
<tr>
<th>Property name</th>
<th>Environment variable</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>vulcainSecretKey</td>
<td>VULCAIN_SECRET_KEY</td>
<td>Secret key</td>
</tr>
<tr>
<td>vulcainTokenIssuer</td>
<td>VULCAIN_TOKEN_ISSUER</td>
<td>Token issuer</td>
</tr>
<tr>
<td>vulcainTokenExpiration</td>
<td>VULCAIN_TOKEN_EXPIRATION</td>
<td>Token expiration (default 20m)</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Under the hood, <strong>vulcain</strong> uses <a href="https://github.com/auth0/node-jsonwebtoken">jsonwebtoken</a>.</p>
</blockquote>
<h2 id="create-apikey">Create apikey<a class="headerlink" href="#create-apikey" title="Permanent link">&para;</a></h2>
<p>Apikey can be created with the <code>apikey.create</code> verb (see service description for details) and can be used like a bearer token by replacing the <code>Authorization: Bearer &lt;token&gt;</code> by <code>Authorization: ApiKey &lt;apikey&gt;</code></p>
<p>Apikey has no expiration time and must be revoked with the <code>apikey.delete</code> verb.</p>
<p>Since apikey validation process needs to access apikey data, if you want to use apikey authentication in another service, you must specify how to access to the user service by adding the following line in <code>initializeDefaultServices</code>.</p>
<div class="codehilite"><pre><span></span>  <span class="k">this</span><span class="p">.</span><span class="n">enableApiKeyAuthentication</span><span class="p">(</span><span class="s">&quot;users-service&quot;</span><span class="p">);</span> <span class="c1">// Set with the name of the users service</span>
</pre></div>


<h2 id="extend-default-user-model">Extend default user model<a class="headerlink" href="#extend-default-user-model" title="Permanent link">&para;</a></h2>
<p><strong>Vulcain</strong> uses a default user model, you can extend or replace it in your user service by adding a new user model.</p>
<p>To extends the default user model, add this file into the src/api hierarchy.</p>
<div class="codehilite"><pre><span></span><span class="n">import</span> <span class="p">{</span> <span class="n">User</span> <span class="p">}</span> <span class="k">from</span> <span class="s">&quot;vulcain-users&quot;</span><span class="p">;</span>
<span class="n">import</span> <span class="p">{</span> <span class="n">Model</span><span class="p">,</span> <span class="n">Property</span> <span class="p">}</span> <span class="k">from</span> <span class="s">&quot;vulcain-corejs&quot;</span><span class="p">;</span>

<span class="n">@Model</span><span class="p">({</span> <span class="n">name</span><span class="p">:</span> <span class="err">&#39;</span><span class="n">User</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">extends</span><span class="p">:</span> <span class="err">&#39;</span><span class="p">+</span><span class="n">User</span><span class="err">&#39;</span> <span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">MyUser</span> <span class="n">extends</span> <span class="n">User</span> <span class="p">{</span>
    <span class="n">@Property</span><span class="p">({</span><span class="n">type</span><span class="p">:</span> <span class="err">&#39;</span><span class="n">number</span><span class="err">&#39;</span><span class="p">})</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">number</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>The thing to note is the <code>extends</code> syntax with a '+' prefix before the model to extend. This means inheriting and extending an existing model and replace it with this new one.</p>
<p>To replace an existing model with a new one, use <code>extends: "-User"</code> instead.</p>
<blockquote>
<p>Be carefull with that, you must implement all default model behaviors like password protection.</p>
</blockquote>
              
              
                <h2>Comments</h2>
                <div id="disqus_thread"></div>
                <script>
                  var disqus_config = function () {
                    this.page.url = "https://vulcainjs.github.io/articles/users/";
                    this.page.identifier =
                      "/articles/users/";
                  };
                  (function() {
                    var d = document, s = d.createElement("script");
                    s.src = "//vulcainjs.disqus.com/embed.js";
                    s.setAttribute("data-timestamp", +new Date());
                    (d.head || d.body).appendChild(s);
                  })();
                </script>
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../" title="How to index" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How to index
              </span>
            </div>
          </a>
        
        
          <a href="../../about/license/" title="license" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                license
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright Â© 2017 Zenasoft
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/vulcainjs" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-30ac6a1727.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>